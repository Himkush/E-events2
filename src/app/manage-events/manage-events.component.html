<div class="container">

  <div class="row  ml-xs-2 mt-5 ">

    <div class="col-12">

      <tabset>
        <tab heading="Participated" id="tab1">
          <div *ngIf="loaded && !participatedEvents">
            <h3 class="text-secondary">You have not Participated in any Event!!</h3>
          </div>
          <div class="table-responsive-md" *ngIf="loaded && participatedEvents">
            <table class="table table-striped table-bordered">
              <thead class="thead-dark">
              <tr>
                <th>Name</th>
                <th>Event Date</th>
                <th>Event Time</th>
                <th>Details</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let x of participatedEvents">
                <td class="text-uppercase font-weight-bolder">{{x.eventName}}
                  <span *ngIf="x.eventDate.toDate() < this.date" class="badge badge-pill badge-info">ended</span>
                </td>
                <td>{{x.eventDate.toDate() | date: 'mediumDate'}}</td>
                <td>{{x.eventTime.toDate() | date: 'shortTime'}}</td>
                <td>
                  <a class="btn btn-outline-dark" [routerLink]="['../event', x.id]" role="button">Details</a>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
          <div *ngIf="!loaded" class="my-class">
            <div class="loader">Loading...</div>
          </div>
        </tab>

        <tab heading="Posted">
          <div *ngIf="loaded && !postedEvents">
            <h3 class="text-secondary">You have not Posted in any Event!!</h3>
          </div>

          <!--Filter-->
          <div class="form-group">
            <label class="font-weight-bolder" for="approveFilter">Filter By:</label>
            <select class="form-control" id="approveFilter" [(ngModel)]="approveFilterValue">
              <option value="">All</option>
              <option value="true">Approved</option>
              <option value="false">Not Approved</option>
            </select>
          </div>

          <div class="table-responsive-md" *ngIf="loaded && postedEvents">
            <table class="table table-bordered">
              <thead class="thead-dark">
              <tr>
                <th>Name</th>
                <th>Event Date</th>
                <th>Event Time</th>
                <th>Details</th>
                <th>Assign Winners</th>
                <th>Edit</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let x of postedEvents | filter: 'approved': approveFilterValue"
                  [ngClass]="{'table-success': x.approved, 'table-danger': !x.approved}">
                <td class="text-uppercase font-weight-bolder">{{x.eventName}}
                  <span *ngIf="x.eventDate.toDate() < this.date" class="badge badge-pill badge-info">ended</span>
                </td>
                <td>{{x.eventDate.toDate() | date: 'mediumDate'}}</td>
                <td>{{x.eventTime.toDate() | date: 'shortTime'}}</td>
                <td>
                  <a class="btn btn-outline-dark w-100" [routerLink]="['../event', x.id]" role="button">Details</a>
                </td>
                <td>
                  <button class="btn btn-outline-dark w-100"
                     [routerLink]="['/assign-winners', x.id, x.participation]"
                     role="button" [disabled]="(x.eventDate.toDate() > this.date)">Assign Winners</button>
                  <!--[disabled]="(x.eventDate.toDate() > this.date)"-->
                </td>
                <td>
                  <button class="btn btn-outline-dark w-100" role="button"
                          [disabled]="(x.eventDate.toDate() < this.date)" (click)="editEvent(x)">Edit
                  </button>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
        </tab>
      </tabset>
    </div>
  </div>
</div>
